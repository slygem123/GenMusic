<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GenMusic Player</title>
<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;}
body {color:#fff;overflow-x:hidden;position:relative;transition:background 0.5s ease;background:linear-gradient(135deg,#0071e3,#00c6ff);}

/* Sidebar */
#sidebar {position:fixed;top:0;left:-250px;width:250px;height:100vh;background:#f5f5f7;border-right:1px solid #ccc;padding:20px;display:flex;flex-direction:column;transition:0.3s;z-index:100;}
#sidebar.show{left:0;}
#logo-frame {background: rgba(255,255,255,0.15);backdrop-filter: blur(10px);border-radius: 16px;padding: 14px 20px;margin-bottom: 20px;text-align: center;transition: transform 0.2s, box-shadow 0.2s;cursor: default;}
#logo-frame:hover {transform: scale(1.03); box-shadow: 0 6px 20px rgba(0,0,0,0.2);}
#logo-frame:active {transform: scale(0.97);}
#logo-frame h1 {margin:0; font-size:28px; font-weight:600; color:#fff;}
#sidebar nav a{text-decoration:none;color:#000;font-weight:500;margin:12px 0;display:block;transition:0.2s;}
#sidebar nav a:hover{color:#0071e3;transform:scale(1.05);}

/* Main */
#main{margin-left:0;height:100vh;display:flex;flex-direction:column;transition:0.3s;}
#topbar{height:60px;border-bottom:1px solid #ccc;display:flex;align-items:center;padding:0 20px;justify-content:space-between;background:#fff;z-index:50;position:relative;}
#search input{padding:8px 14px;border-radius:14px;border:1px solid #ccc;width:100%;transition:all 0.2s;}
#search input:focus{border-color:#0071e3;box-shadow:0 0 5px rgba(0,113,227,0.3);}

/* Track list */
#content{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:12px;}
.track-button{padding:14px; display:flex; align-items:center; gap:12px; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius:16px; cursor:pointer; transition: transform 0.2s, box-shadow 0.2s, background 0.2s;}
.track-button img{width:50px;height:50px;border-radius:8px;object-fit:cover;}
.track-button:hover{transform:scale(1.03);box-shadow:0 6px 20px rgba(0,0,0,0.2);}
.track-button:active{transform:scale(0.97);}

/* Now Playing Mini Bar */
#now-playing-bar{position:fixed;bottom:0;left:0;right:0;height:72px;background: rgba(255,255,255,0.15);backdrop-filter: blur(10px);display:flex;align-items:center;padding:0 15px;justify-content:space-between;cursor:pointer;transition:transform 0.3s, opacity 0.3s;}
#now-playing-bar .info{display:flex;align-items:center;gap:12px;}
#now-playing-bar .info img{width:52px;height:52px;border-radius:8px;transition: transform 0.5s linear;}
#now-playing-bar .controls svg{width:28px;height:28px;fill:#fff;transition:0.2s;cursor:pointer;}
#now-playing-bar .controls svg:hover{transform:scale(1.2);}

/* Full Player - Centered modal style */
#full-player {position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 200; opacity: 0; pointer-events: none; transition: opacity 0.3s ease-in-out;}
#full-player.show {opacity: 1; pointer-events: auto;}
#fp-frame {background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: 20px; padding: 25px; max-width: 400px; width: 90%; display: flex; flex-direction: column; align-items: center; transition: transform 0.2s, box-shadow 0.2s;}
#fp-frame:hover {transform: scale(1.02); box-shadow: 0 8px 25px rgba(0,0,0,0.25);}
#fp-frame:active {transform: scale(0.98);}
#fp-frame img {width:80%; max-width:300px; border-radius:16px; margin-bottom:15px; transition: transform 0.5s linear;}
#fp-frame h2 {margin:0;color:#fff;text-align:center;margin-bottom:5px;}
#fp-frame p {color:#fff;text-align:center;margin-bottom:20px;}
#fp-frame .progress-container {width:100%; height:6px; background:rgba(255,255,255,0.2); border-radius:3px; margin-bottom:15px; position:relative; cursor:pointer;}
#fp-frame .progress {height:100%; background:#fff; width:0%; border-radius:3px; transition:width 0.1s linear;}
#volume-container {display:flex;align-items:center;gap:10px;margin-bottom:20px;background: rgba(255,255,255,0.15);backdrop-filter: blur(10px);border-radius:12px;padding:6px;width:100%;}
#volume-slider {width:100%;-webkit-appearance:none;height:6px;border-radius:3px;background:rgba(255,255,255,0.3);outline:none;cursor:pointer;}
#volume-slider::-webkit-slider-thumb {-webkit-appearance:none;width:16px;height:16px;background:#fff;border-radius:50%;cursor:pointer;}
#volume-slider::-moz-range-thumb {width:16px;height:16px;background:#fff;border-radius:50%;cursor:pointer;}
#fp-frame .controls {display:flex;justify-content:center;align-items:center;gap:40px;}
#fp-frame .controls svg {width:44px;height:44px;fill:#fff;transition:0.2s;cursor:pointer;}
#fp-frame .controls svg:hover {transform:scale(1.2);}

/* Mobile menu toggle */
#menu-toggle{display:none;font-size:28px;cursor:pointer;}
@media(max-width:768px){#menu-toggle{display:block;}}
</style>
</head>
<body>

<!-- Sidebar -->
<div id="sidebar">
  <div id="logo-frame"><h1>GenMusic</h1></div>
  <nav><a href="#">Library</a></nav>
</div>

<!-- Main -->
<div id="main">
  <div id="topbar">
    <button id="menu-toggle">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="28" height="28"><path d="M3 6h18M3 12h18M3 18h18" stroke="#000" stroke-width="2" stroke-linecap="round"/></svg>
    </button>
    <div style="flex:1;margin-left:10px;"><input type="text" id="search" placeholder="Search music..."></div>
  </div>
  <div id="content"></div>
</div>

<!-- Now Playing Mini Bar -->
<div id="now-playing-bar">
  <div class="info">
    <img src="" alt="cover" id="np-cover">
    <div><div id="np-title">Title</div><div id="np-artist">Artist</div></div>
  </div>
  <div class="controls">
    <svg id="np-prev" viewBox="0 0 24 24"><path d="M11 18V6l-8.5 6L11 18zm1-12h2v12h-2z"/></svg>
    <svg id="np-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
    <svg id="np-next" viewBox="0 0 24 24"><path d="M13 6v12l8.5-6L13 6zm-1 0h-2v12h2z"/></svg>
  </div>
</div>

<!-- Full Player -->
<div id="full-player">
  <div id="fp-frame">
    <img src="" alt="cover" id="fp-cover">
    <h2 id="fp-title">Title</h2>
    <p id="fp-artist">Artist</p>
    <div class="progress-container"><div class="progress" id="fp-progress"></div></div>
    <div id="volume-container">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" stroke="#fff" stroke-width="2" d="M9 9v6h4l5 5V4l-5 5H9z"/></svg>
      <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
    </div>
    <div class="controls">
      <svg id="fp-prev" viewBox="0 0 24 24"><path d="M11 18V6l-8.5 6L11 18zm1-12h2v12h-2z"/></svg>
      <svg id="fp-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
      <svg id="fp-next" viewBox="0 0 24 24"><path d="M13 6v12l8.5-6L13 6zm-1 0h-2v12h2z"/></svg>
    </div>
  </div>
</div>

<script src="scripts/AudioRead.js"></script>
<script>
const menuToggle=document.getElementById("menu-toggle");
const sidebar=document.getElementById("sidebar");
menuToggle.addEventListener("click",()=>{sidebar.classList.toggle("show");});

const audio=new Audio();
audio.volume=1;
let currentIndex=0;
let tracks=songs;

const content=document.getElementById("content");
const searchInput=document.getElementById("search");

const npBar=document.getElementById("now-playing-bar");
const npCover=document.getElementById("np-cover");
const npTitle=document.getElementById("np-title");
const npArtist=document.getElementById("np-artist");
const npPlay=document.getElementById("np-play");
const npPrev=document.getElementById("np-prev");
const npNext=document.getElementById("np-next");

const fp=document.getElementById("full-player");
const fpCover=document.getElementById("fp-cover");
const fpTitle=document.getElementById("fp-title");
const fpArtist=document.getElementById("fp-artist");
const fpPlay=document.getElementById("fp-play");
const fpPrev=document.getElementById("fp-prev");
const fpNext=document.getElementById("fp-next");
const fpProgress=document.getElementById("fp-progress");
const volumeSlider=document.getElementById("volume-slider");

let rotateInterval=null;

function startRotate(){
  clearInterval(rotateInterval);
  let deg=0;
  rotateInterval=setInterval(()=>{
    deg+=1;
    npCover.style.transform=`rotate(${deg}deg)`;
    fpCover.style.transform=`rotate(${deg}deg)`;
  },20);
}
function stopRotate(){clearInterval(rotateInterval);}

function createTrackButtonsByArtist(){
  content.innerHTML='';
  const artistsMap={};
  tracks.forEach((song,index)=>{
    if(!artistsMap[song.artist]) artistsMap[song.artist]=[];
    artistsMap[song.artist].push({...song,index});
  });
  for(const artist in artistsMap){
    const section=document.createElement('div');
    const header=document.createElement('h3');
    header.textContent=artist;
    header.style.cursor='pointer';
    header.style.margin='10px 0';
    header.style.color='#fff';
    header.style.userSelect='none';
    const list=document.createElement('div');
    list.style.display='flex';
    list.style.flexDirection='column';
    list.style.gap='10px';
    header.addEventListener('click',()=>{list.style.display=list.style.display==='none'?'flex':'none';});
    artistsMap[artist].forEach(song=>{
      const btn=document.createElement('div');
      btn.classList.add('track-button');
      btn.innerHTML=`<img src="${song.cover}" alt="cover"><div>${song.title}</div>`;
      btn.addEventListener('click',()=>{
        loadSong(song.index);
        playSong();
        showNowPlayingBar();
      });
      list.appendChild(btn);
      song.btn=btn;
    });
    section.appendChild(header);
    section.appendChild(list);
    content.appendChild(section);
  }
}

function loadSong(index){
  currentIndex=index;
  const song=tracks[index];
  audio.src=song.src;
  npCover.src=song.cover;
  npTitle.textContent=song.title;
  npArtist.textContent=song.artist;
  fpCover.src=song.cover;
  fpTitle.textContent=song.title;
  fpArtist.textContent=song.artist;
}

function playSong(){
  audio.play();
  npPlay.innerHTML=`<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>`;
  fpPlay.innerHTML=npPlay.innerHTML;
  startRotate();
}

function pauseSong(){
  audio.pause();
  npPlay.innerHTML=`<path d="M8 5v14l11-7z"/>`;
  fpPlay.innerHTML=npPlay.innerHTML;
  stopRotate();
}

function prevSong(){currentIndex=(currentIndex-1+tracks.length)%tracks.length;loadSong(currentIndex);playSong();}
function nextSong(){currentIndex=(currentIndex+1)%tracks.length;loadSong(currentIndex);playSong();}

npPlay.addEventListener("click",()=>{audio.paused?playSong():pauseSong();});
npPrev.addEventListener("click",()=>{prevSong();});
npNext.addEventListener("click",()=>{nextSong();});
fpPlay.addEventListener("click",()=>{audio.paused?playSong():pauseSong();});
fpPrev.addEventListener("click",prevSong);
fpNext.addEventListener("click",nextSong);

npBar.addEventListener("click",()=>{fp.classList.add("show");});
fp.addEventListener("click",(e)=>{if(e.target===fp){fp.classList.remove("show");}});

audio.addEventListener("timeupdate",()=>{fpProgress.style.width=(audio.currentTime/audio.duration*100)+"%";});
fp.querySelector(".progress-container").addEventListener("click",(e)=>{audio.currentTime=(e.offsetX/e.currentTarget.clientWidth)*audio.duration;});
volumeSlider.addEventListener("input",(e)=>{audio.volume=e.target.value;});

function showNowPlayingBar(){npBar.style.opacity="1";}

searchInput.addEventListener('input',()=>{
  const q=searchInput.value.toLowerCase();
  tracks.forEach(t=>{
    if(t.btn)t.btn.style.display=t.title.toLowerCase().includes(q)||t.artist.toLowerCase().includes(q)?'flex':'none';
  });
});

createTrackButtonsByArtist();
loadSong(0);
showNowPlayingBar();
</script>
</body>
</html>
